<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="format-detection" content="telephone=no">
  <title>中丸町 → 池袋西口 発車時刻</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* 曜日タブ */
    .day-tabs { margin-bottom: 8px; }
    .day-tabs .tab { font-size: 0.95em; border-radius: 6px 6px 0 0; }
    .day-tabs .tab.active[data-daytype="weekday"] { background: #4CAF50; color: #fff; }
    .day-tabs .tab.active[data-daytype="saturday"] { background: #2196F3; color: #fff; }
    .day-tabs .tab.active[data-daytype="holiday"] { background: #F44336; color: #fff; }
    .full-toggle { display: flex; justify-content: flex-end; margin: 4px 0 8px; }
    .full-toggle label { font-size: 0.85em; color: #555; display: flex; align-items: center; gap: 4px; cursor: pointer; }
    .full-toggle input { cursor: pointer; }
  </style>
</head>
<body>
  <h2>中丸町 → 池袋西口</h2>
  <p class="route-note">
    系統別に中丸町バス停からの<b>発車時刻</b>をまとめています。<br>
    2025年3月16日改正ダイヤ
  </p>

  <!-- 終日表示トグル -->
  <div class="full-toggle">
    <label><input type="checkbox" id="full-mode"> 終日表示</label>
  </div>

  <!-- 曜日タブ -->
  <div class="tab-container day-tabs">
    <button class="tab" data-daytype="weekday">平日</button>
    <button class="tab" data-daytype="saturday">土曜</button>
    <button class="tab" data-daytype="holiday">日祝</button>
  </div>

  <!-- 系統タブ -->
  <div class="tab-container noriba-tabs">
    <button class="tab active" data-target="all">全て</button>
    <button class="tab" data-target="route02">池02</button>
    <button class="tab" data-target="route20">池20</button>
    <button class="tab" data-target="route21">池21</button>
  </div>

  <!-- ===== 全系統統合（時系列順） ===== -->
  <div id="all" class="arrival-list">
    <table class="arrival-table">
      <thead>
        <tr>
          <th>中丸町発</th>
          <th>西口着</th>
          <th>系統</th>
        </tr>
      </thead>
      <tbody id="all-body">
        <!-- JSで動的生成 -->
      </tbody>
    </table>
  </div>

  <!-- ===== 池02 熊野町循環 ===== -->
  <div id="route02" class="arrival-list hidden">
    <div class="noriba-header noriba1-header">
      <span class="noriba-badge n1">池02</span>
      <span class="noriba-detail">熊野町循環（池袋西口まで約20〜23分 ※熊野町経由）</span>
    </div>
    <table class="arrival-table">
      <thead>
        <tr><th>中丸町発</th><th>西口着</th><th>系統・行先</th></tr>
      </thead>
      <tbody id="route02-body"></tbody>
    </table>
  </div>

  <!-- ===== 池20 高島平方面 ===== -->
  <div id="route20" class="arrival-list hidden">
    <div class="noriba-header noriba5-header">
      <span class="noriba-badge n5">池20</span>
      <span class="noriba-detail">高島平操車場方面から（池袋西口まで約10〜12分）</span>
    </div>
    <table class="arrival-table">
      <thead>
        <tr><th>中丸町発</th><th>西口着</th><th>系統・行先</th></tr>
      </thead>
      <tbody id="route20-body"></tbody>
    </table>
  </div>

  <!-- ===== 池21 高島平駅方面 ===== -->
  <div id="route21" class="arrival-list hidden">
    <div class="noriba-header noriba6-header">
      <span class="noriba-badge n6">池21</span>
      <span class="noriba-detail">高島平駅方面から（池袋西口まで約9〜11分）</span>
    </div>
    <table class="arrival-table">
      <thead>
        <tr><th>中丸町発</th><th>西口着</th><th>系統・行先</th></tr>
      </thead>
      <tbody id="route21-body"></tbody>
    </table>
  </div>

  <div class="bottom-nav">
    <a href="timetable-ikebukuro.html" class="timetable-link">時刻表（池袋西口発 → 中丸町方面）</a>
    <a href="index.html" class="back-link">&larr; メニューに戻る</a>
  </div>

  <script>
    // ================================================================
    // 時刻表データ（2025年3月16日改正ダイヤ）
    // 中丸町 → 池袋駅西口方面
    // ================================================================

    var timetableData = {
      // ===== 平日 =====
      weekday: {
        route02: [
          { dep: '6:51', arr: '7:11', route: '池02', dest: '池袋駅西口' },
          { dep: '7:03', arr: '7:24', route: '池02', dest: '池袋駅西口' },
          { dep: '7:19', arr: '7:40', route: '池02', dest: '池袋駅西口' },
          { dep: '7:33', arr: '7:54', route: '池02', dest: '池袋駅西口' },
          { dep: '7:48', arr: '8:09', route: '池02', dest: '池袋駅西口' },
          { dep: '8:03', arr: '8:24', route: '池02', dest: '池袋駅西口' },
          { dep: '8:18', arr: '8:39', route: '池02', dest: '池袋駅西口' },
          { dep: '8:33', arr: '8:54', route: '池02', dest: '池袋駅西口' },
          { dep: '8:48', arr: '9:09', route: '池02', dest: '池袋駅西口' },
          { dep: '9:07', arr: '9:28', route: '池02', dest: '池袋駅西口' },
          { dep: '9:22', arr: '9:43', route: '池02', dest: '池袋駅西口' },
          { dep: '9:37', arr: '9:59', route: '池02', dest: '池袋駅西口' },
          { dep: '9:52', arr: '10:14', route: '池02', dest: '池袋駅西口' },
          { dep: '10:07', arr: '10:30', route: '池02', dest: '池袋駅西口' },
          { dep: '10:23', arr: '10:46', route: '池02', dest: '池袋駅西口' },
          { dep: '10:37', arr: '11:00', route: '池02', dest: '池袋駅西口' },
          { dep: '10:52', arr: '11:15', route: '池02', dest: '池袋駅西口' },
          { dep: '11:07', arr: '11:30', route: '池02', dest: '池袋駅西口' },
          { dep: '11:22', arr: '11:45', route: '池02', dest: '池袋駅西口' },
          { dep: '11:37', arr: '12:00', route: '池02', dest: '池袋駅西口' },
          { dep: '11:52', arr: '12:15', route: '池02', dest: '池袋駅西口' },
          { dep: '12:07', arr: '12:30', route: '池02', dest: '池袋駅西口' },
          { dep: '12:22', arr: '12:45', route: '池02', dest: '池袋駅西口' },
          { dep: '12:37', arr: '13:00', route: '池02', dest: '池袋駅西口' },
          { dep: '12:52', arr: '13:15', route: '池02', dest: '池袋駅西口' },
          { dep: '13:07', arr: '13:30', route: '池02', dest: '池袋駅西口' },
          { dep: '13:22', arr: '13:44', route: '池02', dest: '池袋駅西口' },
          { dep: '13:37', arr: '13:59', route: '池02', dest: '池袋駅西口' },
          { dep: '13:52', arr: '14:14', route: '池02', dest: '池袋駅西口' },
          { dep: '14:07', arr: '14:29', route: '池02', dest: '池袋駅西口' },
          { dep: '14:22', arr: '14:44', route: '池02', dest: '池袋駅西口' },
          { dep: '14:37', arr: '14:59', route: '池02', dest: '池袋駅西口' },
          { dep: '14:52', arr: '15:14', route: '池02', dest: '池袋駅西口' },
          { dep: '15:07', arr: '15:29', route: '池02', dest: '池袋駅西口' },
          { dep: '15:22', arr: '15:44', route: '池02', dest: '池袋駅西口' },
          { dep: '15:37', arr: '15:59', route: '池02', dest: '池袋駅西口' },
          { dep: '15:52', arr: '16:14', route: '池02', dest: '池袋駅西口' },
          { dep: '16:07', arr: '16:29', route: '池02', dest: '池袋駅西口' },
          { dep: '16:21', arr: '16:43', route: '池02', dest: '池袋駅西口' },
          { dep: '16:35', arr: '16:57', route: '池02', dest: '池袋駅西口' },
          { dep: '16:49', arr: '17:11', route: '池02', dest: '池袋駅西口' },
          { dep: '17:03', arr: '17:25', route: '池02', dest: '池袋駅西口' },
          { dep: '17:17', arr: '17:39', route: '池02', dest: '池袋駅西口' },
          { dep: '17:32', arr: '17:54', route: '池02', dest: '池袋駅西口' },
          { dep: '17:45', arr: '18:07', route: '池02', dest: '池袋駅西口' },
          { dep: '17:59', arr: '18:21', route: '池02', dest: '池袋駅西口' },
          { dep: '18:13', arr: '18:35', route: '池02', dest: '池袋駅西口' },
          { dep: '18:27', arr: '18:49', route: '池02', dest: '池袋駅西口' },
          { dep: '18:41', arr: '19:03', route: '池02', dest: '池袋駅西口' },
          { dep: '18:55', arr: '19:17', route: '池02', dest: '池袋駅西口' },
          { dep: '19:09', arr: '19:31', route: '池02', dest: '池袋駅西口' },
          { dep: '19:24', arr: '19:46', route: '池02', dest: '池袋駅西口' },
          { dep: '19:37', arr: '19:59', route: '池02', dest: '池袋駅西口' },
          { dep: '19:51', arr: '20:13', route: '池02', dest: '池袋駅西口' },
          { dep: '20:05', arr: '20:27', route: '池02', dest: '池袋駅西口' },
          { dep: '20:19', arr: '20:41', route: '池02', dest: '池袋駅西口' },
          { dep: '20:40', arr: '21:00', route: '池02', dest: '池袋駅西口' },
          { dep: '21:01', arr: '21:21', route: '池02', dest: '池袋駅西口' },
          { dep: '21:24', arr: '21:44', route: '池82', dest: '池袋駅西口' },
          { dep: '21:42', arr: '22:02', route: '池82', dest: '池袋駅西口' }
        ],
        route20: [
          { dep: '7:06', arr: '7:16', route: '池20', dest: '池袋駅西口' },
          { dep: '7:36', arr: '7:46', route: '池20', dest: '池袋駅西口' },
          { dep: '8:06', arr: '8:16', route: '池20', dest: '池袋駅西口' },
          { dep: '8:32', arr: '8:42', route: '池20', dest: '池袋駅西口' },
          { dep: '8:56', arr: '9:06', route: '池20', dest: '池袋駅西口' },
          { dep: '9:22', arr: '9:32', route: '池20', dest: '池袋駅西口' },
          { dep: '9:49', arr: '9:59', route: '池20', dest: '池袋駅西口' },
          { dep: '10:19', arr: '10:31', route: '池20', dest: '池袋駅西口' },
          { dep: '10:44', arr: '10:56', route: '池20', dest: '池袋駅西口' },
          { dep: '11:10', arr: '11:22', route: '池20', dest: '池袋駅西口' },
          { dep: '11:37', arr: '11:49', route: '池20', dest: '池袋駅西口' },
          { dep: '12:07', arr: '12:19', route: '池20', dest: '池袋駅西口' },
          { dep: '12:37', arr: '12:49', route: '池20', dest: '池袋駅西口' },
          { dep: '13:07', arr: '13:18', route: '池20', dest: '池袋駅西口' },
          { dep: '13:37', arr: '13:48', route: '池20', dest: '池袋駅西口' },
          { dep: '14:07', arr: '14:18', route: '池20', dest: '池袋駅西口' },
          { dep: '14:37', arr: '14:48', route: '池20', dest: '池袋駅西口' },
          { dep: '15:07', arr: '15:18', route: '池20', dest: '池袋駅西口' },
          { dep: '15:37', arr: '15:48', route: '池20', dest: '池袋駅西口' },
          { dep: '16:07', arr: '16:18', route: '池20', dest: '池袋駅西口' },
          { dep: '16:36', arr: '16:47', route: '池20', dest: '池袋駅西口' },
          { dep: '17:02', arr: '17:13', route: '池20', dest: '池袋駅西口' },
          { dep: '17:28', arr: '17:39', route: '池20', dest: '池袋駅西口' },
          { dep: '17:46', arr: '17:57', route: '池20', dest: '池袋駅西口' },
          { dep: '18:08', arr: '18:19', route: '池20', dest: '池袋駅西口' },
          { dep: '18:30', arr: '18:41', route: '池20', dest: '池袋駅西口' },
          { dep: '18:53', arr: '19:04', route: '池20', dest: '池袋駅西口' },
          { dep: '19:14', arr: '19:24', route: '池20', dest: '池袋駅西口' },
          { dep: '19:34', arr: '19:44', route: '池20', dest: '池袋駅西口' },
          { dep: '19:52', arr: '20:02', route: '池20', dest: '池袋駅西口' },
          { dep: '20:17', arr: '20:26', route: '池20', dest: '池袋駅西口' },
          { dep: '20:35', arr: '20:44', route: '池20', dest: '池袋駅西口' },
          { dep: '20:54', arr: '21:03', route: '池20', dest: '池袋駅西口' },
          { dep: '21:20', arr: '21:29', route: '池20', dest: '池袋駅西口' }
        ],
        route21: [
          { dep: '6:49', arr: '6:59', route: '池21', dest: '池袋駅西口' },
          { dep: '7:22', arr: '7:32', route: '池21', dest: '池袋駅西口' },
          { dep: '7:51', arr: '8:01', route: '池21', dest: '池袋駅西口' },
          { dep: '8:17', arr: '8:27', route: '池21', dest: '池袋駅西口' },
          { dep: '8:43', arr: '8:53', route: '池21', dest: '池袋駅西口' },
          { dep: '9:09', arr: '9:19', route: '池21', dest: '池袋駅西口' },
          { dep: '9:34', arr: '9:45', route: '池21', dest: '池袋駅西口' },
          { dep: '10:04', arr: '10:15', route: '池21', dest: '池袋駅西口' },
          { dep: '10:32', arr: '10:42', route: '池21', dest: '池袋駅西口' },
          { dep: '10:57', arr: '11:07', route: '池21', dest: '池袋駅西口' },
          { dep: '11:23', arr: '11:33', route: '池21', dest: '池袋駅西口' },
          { dep: '11:52', arr: '12:02', route: '池21', dest: '池袋駅西口' },
          { dep: '12:22', arr: '12:31', route: '池21', dest: '池袋駅西口' },
          { dep: '12:52', arr: '13:01', route: '池21', dest: '池袋駅西口' },
          { dep: '13:22', arr: '13:33', route: '池21', dest: '池袋駅西口' },
          { dep: '13:52', arr: '14:03', route: '池21', dest: '池袋駅西口' },
          { dep: '14:22', arr: '14:33', route: '池21', dest: '池袋駅西口' },
          { dep: '14:52', arr: '15:03', route: '池21', dest: '池袋駅西口' },
          { dep: '15:22', arr: '15:33', route: '池21', dest: '池袋駅西口' },
          { dep: '15:52', arr: '16:03', route: '池21', dest: '池袋駅西口' },
          { dep: '16:22', arr: '16:33', route: '池21', dest: '池袋駅西口' },
          { dep: '16:49', arr: '17:00', route: '池21', dest: '池袋駅西口' },
          { dep: '17:13', arr: '17:24', route: '池21', dest: '池袋駅西口' },
          { dep: '17:37', arr: '17:47', route: '池21', dest: '池袋駅西口' },
          { dep: '17:57', arr: '18:07', route: '池21', dest: '池袋駅西口' },
          { dep: '18:19', arr: '18:29', route: '池21', dest: '池袋駅西口' },
          { dep: '18:41', arr: '18:51', route: '池21', dest: '池袋駅西口' },
          { dep: '19:04', arr: '19:13', route: '池21', dest: '池袋駅西口' },
          { dep: '19:24', arr: '19:33', route: '池21', dest: '池袋駅西口' },
          { dep: '19:44', arr: '19:53', route: '池21', dest: '池袋駅西口' },
          { dep: '20:04', arr: '20:13', route: '池21', dest: '池袋駅西口' },
          { dep: '20:26', arr: '20:35', route: '池21', dest: '池袋駅西口' },
          { dep: '21:11', arr: '21:20', route: '池21', dest: '池袋駅西口' }
        ]
      },
      // ===== 土曜 =====
      saturday: {
        route02: [
          { dep: '6:57', arr: '7:17', route: '池02', dest: '池袋駅西口' },
          { dep: '7:13', arr: '7:34', route: '池02', dest: '池袋駅西口' },
          { dep: '7:27', arr: '7:48', route: '池02', dest: '池袋駅西口' },
          { dep: '7:41', arr: '8:02', route: '池02', dest: '池袋駅西口' },
          { dep: '7:55', arr: '8:16', route: '池02', dest: '池袋駅西口' },
          { dep: '8:09', arr: '8:30', route: '池02', dest: '池袋駅西口' },
          { dep: '8:22', arr: '8:43', route: '池02', dest: '池袋駅西口' },
          { dep: '8:37', arr: '8:58', route: '池02', dest: '池袋駅西口' },
          { dep: '8:51', arr: '9:12', route: '池02', dest: '池袋駅西口' },
          { dep: '9:05', arr: '9:26', route: '池02', dest: '池袋駅西口' },
          { dep: '9:18', arr: '9:39', route: '池02', dest: '池袋駅西口' },
          { dep: '9:33', arr: '9:54', route: '池02', dest: '池袋駅西口' },
          { dep: '9:47', arr: '10:09', route: '池02', dest: '池袋駅西口' },
          { dep: '10:01', arr: '10:23', route: '池02', dest: '池袋駅西口' },
          { dep: '10:16', arr: '10:39', route: '池02', dest: '池袋駅西口' },
          { dep: '10:29', arr: '10:52', route: '池02', dest: '池袋駅西口' },
          { dep: '10:43', arr: '11:06', route: '池02', dest: '池袋駅西口' },
          { dep: '10:57', arr: '11:20', route: '池02', dest: '池袋駅西口' },
          { dep: '11:11', arr: '11:34', route: '池02', dest: '池袋駅西口' },
          { dep: '11:25', arr: '11:48', route: '池02', dest: '池袋駅西口' },
          { dep: '11:39', arr: '12:02', route: '池02', dest: '池袋駅西口' },
          { dep: '11:52', arr: '12:15', route: '池02', dest: '池袋駅西口' },
          { dep: '12:07', arr: '12:30', route: '池02', dest: '池袋駅西口' },
          { dep: '12:21', arr: '12:44', route: '池02', dest: '池袋駅西口' },
          { dep: '12:35', arr: '12:58', route: '池02', dest: '池袋駅西口' },
          { dep: '12:50', arr: '13:13', route: '池02', dest: '池袋駅西口' },
          { dep: '13:03', arr: '13:26', route: '池02', dest: '池袋駅西口' },
          { dep: '13:18', arr: '13:40', route: '池02', dest: '池袋駅西口' },
          { dep: '13:32', arr: '13:54', route: '池02', dest: '池袋駅西口' },
          { dep: '13:46', arr: '14:08', route: '池02', dest: '池袋駅西口' },
          { dep: '14:00', arr: '14:22', route: '池02', dest: '池袋駅西口' },
          { dep: '14:14', arr: '14:36', route: '池02', dest: '池袋駅西口' },
          { dep: '14:27', arr: '14:49', route: '池02', dest: '池袋駅西口' },
          { dep: '14:42', arr: '15:04', route: '池02', dest: '池袋駅西口' },
          { dep: '14:56', arr: '15:18', route: '池02', dest: '池袋駅西口' },
          { dep: '15:10', arr: '15:32', route: '池02', dest: '池袋駅西口' },
          { dep: '15:25', arr: '15:47', route: '池02', dest: '池袋駅西口' },
          { dep: '15:38', arr: '16:00', route: '池02', dest: '池袋駅西口' },
          { dep: '15:52', arr: '16:14', route: '池02', dest: '池袋駅西口' },
          { dep: '16:06', arr: '16:28', route: '池02', dest: '池袋駅西口' },
          { dep: '16:20', arr: '16:42', route: '池02', dest: '池袋駅西口' },
          { dep: '16:34', arr: '16:56', route: '池02', dest: '池袋駅西口' },
          { dep: '16:48', arr: '17:10', route: '池02', dest: '池袋駅西口' },
          { dep: '17:01', arr: '17:23', route: '池02', dest: '池袋駅西口' },
          { dep: '17:16', arr: '17:38', route: '池02', dest: '池袋駅西口' },
          { dep: '17:30', arr: '17:52', route: '池02', dest: '池袋駅西口' },
          { dep: '17:44', arr: '18:06', route: '池02', dest: '池袋駅西口' },
          { dep: '17:58', arr: '18:20', route: '池02', dest: '池袋駅西口' },
          { dep: '18:13', arr: '18:35', route: '池02', dest: '池袋駅西口' },
          { dep: '18:26', arr: '18:48', route: '池02', dest: '池袋駅西口' },
          { dep: '18:40', arr: '19:02', route: '池02', dest: '池袋駅西口' },
          { dep: '18:54', arr: '19:16', route: '池02', dest: '池袋駅西口' },
          { dep: '19:07', arr: '19:29', route: '池02', dest: '池袋駅西口' },
          { dep: '19:26', arr: '19:48', route: '池02', dest: '池袋駅西口' },
          { dep: '19:46', arr: '20:08', route: '池02', dest: '池袋駅西口' },
          { dep: '20:06', arr: '20:28', route: '池02', dest: '池袋駅西口' },
          { dep: '20:26', arr: '20:46', route: '池02', dest: '池袋駅西口' },
          { dep: '20:46', arr: '21:06', route: '池02', dest: '池袋駅西口' },
          { dep: '21:06', arr: '21:26', route: '池02', dest: '池袋駅西口' },
          { dep: '21:25', arr: '21:46', route: '池02', dest: '池袋駅西口' },
          { dep: '21:45', arr: '22:06', route: '池82', dest: '池袋駅西口' }
        ],
        route20: [
          { dep: '7:19', arr: '7:29', route: '池20', dest: '池袋駅西口' },
          { dep: '7:51', arr: '8:01', route: '池20', dest: '池袋駅西口' },
          { dep: '8:21', arr: '8:31', route: '池20', dest: '池袋駅西口' },
          { dep: '8:46', arr: '8:56', route: '池20', dest: '池袋駅西口' },
          { dep: '9:10', arr: '9:20', route: '池20', dest: '池袋駅西口' },
          { dep: '9:34', arr: '9:44', route: '池20', dest: '池袋駅西口' },
          { dep: '9:59', arr: '10:10', route: '池20', dest: '池袋駅西口' },
          { dep: '10:21', arr: '10:32', route: '池20', dest: '池袋駅西口' },
          { dep: '10:43', arr: '10:55', route: '池20', dest: '池袋駅西口' },
          { dep: '11:06', arr: '11:17', route: '池20', dest: '池袋駅西口' },
          { dep: '11:27', arr: '11:39', route: '池20', dest: '池袋駅西口' },
          { dep: '11:50', arr: '12:01', route: '池20', dest: '池袋駅西口' },
          { dep: '12:11', arr: '12:23', route: '池20', dest: '池袋駅西口' },
          { dep: '12:34', arr: '12:45', route: '池20', dest: '池袋駅西口' },
          { dep: '12:55', arr: '13:07', route: '池20', dest: '池袋駅西口' },
          { dep: '13:16', arr: '13:27', route: '池20', dest: '池袋駅西口' },
          { dep: '13:38', arr: '13:49', route: '池20', dest: '池袋駅西口' },
          { dep: '14:00', arr: '14:11', route: '池20', dest: '池袋駅西口' },
          { dep: '14:22', arr: '14:33', route: '池20', dest: '池袋駅西口' },
          { dep: '14:44', arr: '14:55', route: '池20', dest: '池袋駅西口' },
          { dep: '15:05', arr: '15:16', route: '池20', dest: '池袋駅西口' },
          { dep: '15:28', arr: '15:39', route: '池20', dest: '池袋駅西口' },
          { dep: '15:50', arr: '16:01', route: '池20', dest: '池袋駅西口' },
          { dep: '16:12', arr: '16:23', route: '池20', dest: '池袋駅西口' },
          { dep: '16:34', arr: '16:45', route: '池20', dest: '池袋駅西口' },
          { dep: '16:56', arr: '17:07', route: '池20', dest: '池袋駅西口' },
          { dep: '17:18', arr: '17:29', route: '池20', dest: '池袋駅西口' },
          { dep: '17:40', arr: '17:51', route: '池20', dest: '池袋駅西口' },
          { dep: '18:02', arr: '18:13', route: '池20', dest: '池袋駅西口' },
          { dep: '18:24', arr: '18:35', route: '池20', dest: '池袋駅西口' },
          { dep: '18:45', arr: '18:56', route: '池20', dest: '池袋駅西口' },
          { dep: '19:06', arr: '19:16', route: '池20', dest: '池袋駅西口' },
          { dep: '19:28', arr: '19:38', route: '池20', dest: '池袋駅西口' },
          { dep: '19:52', arr: '20:02', route: '池20', dest: '池袋駅西口' },
          { dep: '20:16', arr: '20:25', route: '池20', dest: '池袋駅西口' },
          { dep: '20:36', arr: '20:45', route: '池20', dest: '池袋駅西口' },
          { dep: '20:59', arr: '21:08', route: '池20', dest: '池袋駅西口' }
        ],
        route21: [
          { dep: '7:04', arr: '7:14', route: '池21', dest: '池袋駅西口' },
          { dep: '7:36', arr: '7:46', route: '池21', dest: '池袋駅西口' },
          { dep: '8:06', arr: '8:16', route: '池21', dest: '池袋駅西口' },
          { dep: '8:34', arr: '8:44', route: '池21', dest: '池袋駅西口' },
          { dep: '8:58', arr: '9:08', route: '池21', dest: '池袋駅西口' },
          { dep: '9:22', arr: '9:32', route: '池21', dest: '池袋駅西口' },
          { dep: '9:47', arr: '9:58', route: '池21', dest: '池袋駅西口' },
          { dep: '10:10', arr: '10:21', route: '池21', dest: '池袋駅西口' },
          { dep: '10:33', arr: '10:43', route: '池21', dest: '池袋駅西口' },
          { dep: '10:55', arr: '11:05', route: '池21', dest: '池袋駅西口' },
          { dep: '11:17', arr: '11:27', route: '池21', dest: '池袋駅西口' },
          { dep: '11:39', arr: '11:49', route: '池21', dest: '池袋駅西口' },
          { dep: '12:01', arr: '12:10', route: '池21', dest: '池袋駅西口' },
          { dep: '12:23', arr: '12:32', route: '池21', dest: '池袋駅西口' },
          { dep: '12:45', arr: '12:54', route: '池21', dest: '池袋駅西口' },
          { dep: '13:07', arr: '13:16', route: '池21', dest: '池袋駅西口' },
          { dep: '13:27', arr: '13:38', route: '池21', dest: '池袋駅西口' },
          { dep: '13:49', arr: '14:00', route: '池21', dest: '池袋駅西口' },
          { dep: '14:11', arr: '14:22', route: '池21', dest: '池袋駅西口' },
          { dep: '14:32', arr: '14:43', route: '池21', dest: '池袋駅西口' },
          { dep: '14:54', arr: '15:05', route: '池21', dest: '池袋駅西口' },
          { dep: '15:16', arr: '15:27', route: '池21', dest: '池袋駅西口' },
          { dep: '15:39', arr: '15:50', route: '池21', dest: '池袋駅西口' },
          { dep: '16:01', arr: '16:12', route: '池21', dest: '池袋駅西口' },
          { dep: '16:23', arr: '16:34', route: '池21', dest: '池袋駅西口' },
          { dep: '16:45', arr: '16:56', route: '池21', dest: '池袋駅西口' },
          { dep: '17:07', arr: '17:18', route: '池21', dest: '池袋駅西口' },
          { dep: '17:29', arr: '17:39', route: '池21', dest: '池袋駅西口' },
          { dep: '17:51', arr: '18:01', route: '池21', dest: '池袋駅西口' },
          { dep: '18:13', arr: '18:23', route: '池21', dest: '池袋駅西口' },
          { dep: '18:35', arr: '18:45', route: '池21', dest: '池袋駅西口' },
          { dep: '18:57', arr: '19:07', route: '池21', dest: '池袋駅西口' },
          { dep: '19:17', arr: '19:26', route: '池21', dest: '池袋駅西口' },
          { dep: '19:40', arr: '19:49', route: '池21', dest: '池袋駅西口' },
          { dep: '20:04', arr: '20:13', route: '池21', dest: '池袋駅西口' },
          { dep: '20:26', arr: '20:35', route: '池21', dest: '池袋駅西口' },
          { dep: '20:47', arr: '20:56', route: '池21', dest: '池袋駅西口' }
        ]
      },
      // ===== 日祝（土曜と同ダイヤ） =====
      holiday: {
        route02: [
          { dep: '6:57', arr: '7:17', route: '池02', dest: '池袋駅西口' },
          { dep: '7:13', arr: '7:34', route: '池02', dest: '池袋駅西口' },
          { dep: '7:27', arr: '7:48', route: '池02', dest: '池袋駅西口' },
          { dep: '7:41', arr: '8:02', route: '池02', dest: '池袋駅西口' },
          { dep: '7:55', arr: '8:16', route: '池02', dest: '池袋駅西口' },
          { dep: '8:09', arr: '8:30', route: '池02', dest: '池袋駅西口' },
          { dep: '8:22', arr: '8:43', route: '池02', dest: '池袋駅西口' },
          { dep: '8:37', arr: '8:58', route: '池02', dest: '池袋駅西口' },
          { dep: '8:51', arr: '9:12', route: '池02', dest: '池袋駅西口' },
          { dep: '9:05', arr: '9:26', route: '池02', dest: '池袋駅西口' },
          { dep: '9:18', arr: '9:39', route: '池02', dest: '池袋駅西口' },
          { dep: '9:33', arr: '9:54', route: '池02', dest: '池袋駅西口' },
          { dep: '9:47', arr: '10:09', route: '池02', dest: '池袋駅西口' },
          { dep: '10:01', arr: '10:23', route: '池02', dest: '池袋駅西口' },
          { dep: '10:16', arr: '10:39', route: '池02', dest: '池袋駅西口' },
          { dep: '10:29', arr: '10:52', route: '池02', dest: '池袋駅西口' },
          { dep: '10:43', arr: '11:06', route: '池02', dest: '池袋駅西口' },
          { dep: '10:57', arr: '11:20', route: '池02', dest: '池袋駅西口' },
          { dep: '11:11', arr: '11:34', route: '池02', dest: '池袋駅西口' },
          { dep: '11:25', arr: '11:48', route: '池02', dest: '池袋駅西口' },
          { dep: '11:39', arr: '12:02', route: '池02', dest: '池袋駅西口' },
          { dep: '11:52', arr: '12:15', route: '池02', dest: '池袋駅西口' },
          { dep: '12:07', arr: '12:30', route: '池02', dest: '池袋駅西口' },
          { dep: '12:21', arr: '12:44', route: '池02', dest: '池袋駅西口' },
          { dep: '12:35', arr: '12:58', route: '池02', dest: '池袋駅西口' },
          { dep: '12:50', arr: '13:13', route: '池02', dest: '池袋駅西口' },
          { dep: '13:03', arr: '13:26', route: '池02', dest: '池袋駅西口' },
          { dep: '13:18', arr: '13:40', route: '池02', dest: '池袋駅西口' },
          { dep: '13:32', arr: '13:54', route: '池02', dest: '池袋駅西口' },
          { dep: '13:46', arr: '14:08', route: '池02', dest: '池袋駅西口' },
          { dep: '14:00', arr: '14:22', route: '池02', dest: '池袋駅西口' },
          { dep: '14:14', arr: '14:36', route: '池02', dest: '池袋駅西口' },
          { dep: '14:27', arr: '14:49', route: '池02', dest: '池袋駅西口' },
          { dep: '14:42', arr: '15:04', route: '池02', dest: '池袋駅西口' },
          { dep: '14:56', arr: '15:18', route: '池02', dest: '池袋駅西口' },
          { dep: '15:10', arr: '15:32', route: '池02', dest: '池袋駅西口' },
          { dep: '15:25', arr: '15:47', route: '池02', dest: '池袋駅西口' },
          { dep: '15:38', arr: '16:00', route: '池02', dest: '池袋駅西口' },
          { dep: '15:52', arr: '16:14', route: '池02', dest: '池袋駅西口' },
          { dep: '16:06', arr: '16:28', route: '池02', dest: '池袋駅西口' },
          { dep: '16:20', arr: '16:42', route: '池02', dest: '池袋駅西口' },
          { dep: '16:34', arr: '16:56', route: '池02', dest: '池袋駅西口' },
          { dep: '16:48', arr: '17:10', route: '池02', dest: '池袋駅西口' },
          { dep: '17:01', arr: '17:23', route: '池02', dest: '池袋駅西口' },
          { dep: '17:16', arr: '17:38', route: '池02', dest: '池袋駅西口' },
          { dep: '17:30', arr: '17:52', route: '池02', dest: '池袋駅西口' },
          { dep: '17:44', arr: '18:06', route: '池02', dest: '池袋駅西口' },
          { dep: '17:58', arr: '18:20', route: '池02', dest: '池袋駅西口' },
          { dep: '18:13', arr: '18:35', route: '池02', dest: '池袋駅西口' },
          { dep: '18:26', arr: '18:48', route: '池02', dest: '池袋駅西口' },
          { dep: '18:40', arr: '19:02', route: '池02', dest: '池袋駅西口' },
          { dep: '18:54', arr: '19:16', route: '池02', dest: '池袋駅西口' },
          { dep: '19:07', arr: '19:29', route: '池02', dest: '池袋駅西口' },
          { dep: '19:26', arr: '19:48', route: '池02', dest: '池袋駅西口' },
          { dep: '19:46', arr: '20:08', route: '池02', dest: '池袋駅西口' },
          { dep: '20:06', arr: '20:28', route: '池02', dest: '池袋駅西口' },
          { dep: '20:26', arr: '20:46', route: '池02', dest: '池袋駅西口' },
          { dep: '20:46', arr: '21:06', route: '池02', dest: '池袋駅西口' },
          { dep: '21:06', arr: '21:26', route: '池02', dest: '池袋駅西口' },
          { dep: '21:25', arr: '21:46', route: '池02', dest: '池袋駅西口' },
          { dep: '21:45', arr: '22:06', route: '池82', dest: '池袋駅西口' }
        ],
        route20: [
          { dep: '7:19', arr: '7:29', route: '池20', dest: '池袋駅西口' },
          { dep: '7:51', arr: '8:01', route: '池20', dest: '池袋駅西口' },
          { dep: '8:21', arr: '8:31', route: '池20', dest: '池袋駅西口' },
          { dep: '8:46', arr: '8:56', route: '池20', dest: '池袋駅西口' },
          { dep: '9:10', arr: '9:20', route: '池20', dest: '池袋駅西口' },
          { dep: '9:34', arr: '9:44', route: '池20', dest: '池袋駅西口' },
          { dep: '9:59', arr: '10:10', route: '池20', dest: '池袋駅西口' },
          { dep: '10:21', arr: '10:32', route: '池20', dest: '池袋駅西口' },
          { dep: '10:43', arr: '10:55', route: '池20', dest: '池袋駅西口' },
          { dep: '11:06', arr: '11:17', route: '池20', dest: '池袋駅西口' },
          { dep: '11:27', arr: '11:39', route: '池20', dest: '池袋駅西口' },
          { dep: '11:50', arr: '12:01', route: '池20', dest: '池袋駅西口' },
          { dep: '12:11', arr: '12:23', route: '池20', dest: '池袋駅西口' },
          { dep: '12:34', arr: '12:45', route: '池20', dest: '池袋駅西口' },
          { dep: '12:55', arr: '13:07', route: '池20', dest: '池袋駅西口' },
          { dep: '13:16', arr: '13:27', route: '池20', dest: '池袋駅西口' },
          { dep: '13:38', arr: '13:49', route: '池20', dest: '池袋駅西口' },
          { dep: '14:00', arr: '14:11', route: '池20', dest: '池袋駅西口' },
          { dep: '14:22', arr: '14:33', route: '池20', dest: '池袋駅西口' },
          { dep: '14:44', arr: '14:55', route: '池20', dest: '池袋駅西口' },
          { dep: '15:05', arr: '15:16', route: '池20', dest: '池袋駅西口' },
          { dep: '15:28', arr: '15:39', route: '池20', dest: '池袋駅西口' },
          { dep: '15:50', arr: '16:01', route: '池20', dest: '池袋駅西口' },
          { dep: '16:12', arr: '16:23', route: '池20', dest: '池袋駅西口' },
          { dep: '16:34', arr: '16:45', route: '池20', dest: '池袋駅西口' },
          { dep: '16:56', arr: '17:07', route: '池20', dest: '池袋駅西口' },
          { dep: '17:18', arr: '17:29', route: '池20', dest: '池袋駅西口' },
          { dep: '17:40', arr: '17:51', route: '池20', dest: '池袋駅西口' },
          { dep: '18:02', arr: '18:13', route: '池20', dest: '池袋駅西口' },
          { dep: '18:24', arr: '18:35', route: '池20', dest: '池袋駅西口' },
          { dep: '18:45', arr: '18:56', route: '池20', dest: '池袋駅西口' },
          { dep: '19:06', arr: '19:16', route: '池20', dest: '池袋駅西口' },
          { dep: '19:28', arr: '19:38', route: '池20', dest: '池袋駅西口' },
          { dep: '19:52', arr: '20:02', route: '池20', dest: '池袋駅西口' },
          { dep: '20:16', arr: '20:25', route: '池20', dest: '池袋駅西口' },
          { dep: '20:36', arr: '20:45', route: '池20', dest: '池袋駅西口' },
          { dep: '20:59', arr: '21:08', route: '池20', dest: '池袋駅西口' }
        ],
        route21: [
          { dep: '7:04', arr: '7:14', route: '池21', dest: '池袋駅西口' },
          { dep: '7:36', arr: '7:46', route: '池21', dest: '池袋駅西口' },
          { dep: '8:06', arr: '8:16', route: '池21', dest: '池袋駅西口' },
          { dep: '8:34', arr: '8:44', route: '池21', dest: '池袋駅西口' },
          { dep: '8:58', arr: '9:08', route: '池21', dest: '池袋駅西口' },
          { dep: '9:22', arr: '9:32', route: '池21', dest: '池袋駅西口' },
          { dep: '9:47', arr: '9:58', route: '池21', dest: '池袋駅西口' },
          { dep: '10:10', arr: '10:21', route: '池21', dest: '池袋駅西口' },
          { dep: '10:33', arr: '10:43', route: '池21', dest: '池袋駅西口' },
          { dep: '10:55', arr: '11:05', route: '池21', dest: '池袋駅西口' },
          { dep: '11:17', arr: '11:27', route: '池21', dest: '池袋駅西口' },
          { dep: '11:39', arr: '11:49', route: '池21', dest: '池袋駅西口' },
          { dep: '12:01', arr: '12:10', route: '池21', dest: '池袋駅西口' },
          { dep: '12:23', arr: '12:32', route: '池21', dest: '池袋駅西口' },
          { dep: '12:45', arr: '12:54', route: '池21', dest: '池袋駅西口' },
          { dep: '13:07', arr: '13:16', route: '池21', dest: '池袋駅西口' },
          { dep: '13:27', arr: '13:38', route: '池21', dest: '池袋駅西口' },
          { dep: '13:49', arr: '14:00', route: '池21', dest: '池袋駅西口' },
          { dep: '14:11', arr: '14:22', route: '池21', dest: '池袋駅西口' },
          { dep: '14:32', arr: '14:43', route: '池21', dest: '池袋駅西口' },
          { dep: '14:54', arr: '15:05', route: '池21', dest: '池袋駅西口' },
          { dep: '15:16', arr: '15:27', route: '池21', dest: '池袋駅西口' },
          { dep: '15:39', arr: '15:50', route: '池21', dest: '池袋駅西口' },
          { dep: '16:01', arr: '16:12', route: '池21', dest: '池袋駅西口' },
          { dep: '16:23', arr: '16:34', route: '池21', dest: '池袋駅西口' },
          { dep: '16:45', arr: '16:56', route: '池21', dest: '池袋駅西口' },
          { dep: '17:07', arr: '17:18', route: '池21', dest: '池袋駅西口' },
          { dep: '17:29', arr: '17:39', route: '池21', dest: '池袋駅西口' },
          { dep: '17:51', arr: '18:01', route: '池21', dest: '池袋駅西口' },
          { dep: '18:13', arr: '18:23', route: '池21', dest: '池袋駅西口' },
          { dep: '18:35', arr: '18:45', route: '池21', dest: '池袋駅西口' },
          { dep: '18:57', arr: '19:07', route: '池21', dest: '池袋駅西口' },
          { dep: '19:17', arr: '19:26', route: '池21', dest: '池袋駅西口' },
          { dep: '19:40', arr: '19:49', route: '池21', dest: '池袋駅西口' },
          { dep: '20:04', arr: '20:13', route: '池21', dest: '池袋駅西口' },
          { dep: '20:26', arr: '20:35', route: '池21', dest: '池袋駅西口' },
          { dep: '20:47', arr: '20:56', route: '池21', dest: '池袋駅西口' }
        ]
      }
    };

        // ================================================================
    // 系統→色クラスのマッピング
    // ================================================================
    function routeClass(r) {
      if (r === '池02' || r === '池82') return 'n1';
      if (r === '池20') return 'n5';
      return 'n6'; // 池21
    }

    function routeKey(r) {
      if (r === '池02' || r === '池82') return 'route02';
      if (r === '池20') return 'route20';
      return 'route21';
    }

    // ================================================================
    // 曜日判定・状態管理
    // ================================================================
    var now = new Date();
    var nowMin = now.getHours() * 60 + now.getMinutes();
    var dayOfWeek = now.getDay();

    var currentDayType = dayOfWeek === 6 ? 'saturday' : dayOfWeek === 0 ? 'holiday' : 'weekday';

    // ================================================================
    // ユーティリティ
    // ================================================================
    function timeToMin(t) {
      var p = t.split(':');
      return parseInt(p[0]) * 60 + parseInt(p[1]);
    }

    // ================================================================
    // テーブル描画
    // ================================================================
    function getDataForDay(dayType) {
      return timetableData[dayType] || timetableData.weekday;
    }

    var fullMode = false;

    function renderSingle(data, tbodyId, panelId) {
      var filtered;
      if (fullMode) {
        filtered = data;
      } else {
        var cutoff = nowMin - 20;
        var upperLimit = nowMin + 60;
        filtered = data.filter(function(d) { return timeToMin(d.dep) >= cutoff; });
        var hasUpcoming = filtered.some(function(d) { return timeToMin(d.dep) <= upperLimit; });
      }

      var panel = document.getElementById(panelId);
      var nobus = panel.querySelector('.no-bus-msg');
      var table = panel.querySelector('.arrival-table');

      if (!fullMode && !hasUpcoming) {
        if (table) table.style.display = 'none';
        if (!nobus) {
          nobus = document.createElement('p');
          nobus.className = 'no-bus-msg';
          nobus.textContent = '\u904B\u884C\u4E2D\u306E\u30D0\u30B9\u306F\u3042\u308A\u307E\u305B\u3093';
          panel.appendChild(nobus);
        }
        nobus.style.display = '';
      } else {
        if (table) table.style.display = '';
        if (nobus) nobus.style.display = 'none';
      }

      var tbody = document.getElementById(tbodyId);
      var html = '';
      filtered.forEach(function(d) {
        var depMin = timeToMin(d.dep);
        var cls = depMin < nowMin ? 'past' : depMin < nowMin + 20 ? 'soon' : '';
        html += '<tr class="' + cls + '">'
          + '<td class="dep-time">' + d.dep + '</td>'
          + '<td class="arr-time">' + d.arr + '</td>'
          + '<td><span class="route-tag">' + d.route + '</span> ' + d.dest + '</td>'
          + '</tr>';
      });
      tbody.innerHTML = html;
    }

    function renderAll() {
      var dayData = getDataForDay(currentDayType);
      var all = [];
      var keys = ['route02', 'route20', 'route21'];
      keys.forEach(function(key) {
        if (!dayData[key]) return;
        dayData[key].forEach(function(d) {
          all.push({ dep: d.dep, arr: d.arr, route: d.route, dest: d.dest, routeKey: key });
        });
      });
      all.sort(function(a, b) { return timeToMin(a.dep) - timeToMin(b.dep); });

      var filtered;
      if (fullMode) {
        filtered = all;
      } else {
        var cutoff = nowMin - 20;
        filtered = all.filter(function(d) { return timeToMin(d.dep) >= cutoff; });
        var upperLimit = nowMin + 60;
        var hasUpcoming = filtered.some(function(d) { return timeToMin(d.dep) <= upperLimit; });
      }
      var allPanel = document.getElementById('all');
      var allTable = allPanel.querySelector('.arrival-table');
      var allNobus = allPanel.querySelector('.no-bus-msg');

      if (!fullMode && !hasUpcoming) {
        if (allTable) allTable.style.display = 'none';
        if (!allNobus) {
          allNobus = document.createElement('p');
          allNobus.className = 'no-bus-msg';
          allNobus.textContent = '\u904B\u884C\u4E2D\u306E\u30D0\u30B9\u306F\u3042\u308A\u307E\u305B\u3093';
          allPanel.appendChild(allNobus);
        }
        allNobus.style.display = '';
      } else {
        if (allTable) allTable.style.display = '';
        if (allNobus) allNobus.style.display = 'none';
      }

      var tbody = document.getElementById('all-body');
      var html = '';
      filtered.forEach(function(d) {
        var depMin = timeToMin(d.dep);
        var cls = depMin < nowMin ? 'past' : depMin < nowMin + 20 ? 'soon' : '';
        html += '<tr class="' + cls + ' all-row-clickable" data-routekey="' + d.routeKey + '">'
          + '<td class="dep-time">' + d.dep + '</td>'
          + '<td class="arr-time">' + d.arr + '</td>'
          + '<td><span class="noriba-badge-sm ' + routeClass(d.route) + '">' + d.route.replace('\u6C60', '') + '</span> <span class="route-tag">' + d.route + '</span></td>'
          + '</tr>';
      });
      tbody.innerHTML = html;
    }

    // ================================================================
    // 全描画更新
    // ================================================================
    function renderAllTables() {
      var dayData = getDataForDay(currentDayType);
      renderSingle(dayData.route02, 'route02-body', 'route02');
      renderSingle(dayData.route20, 'route20-body', 'route20');
      renderSingle(dayData.route21, 'route21-body', 'route21');
      renderAll();

      setTimeout(function() {
        var visible = document.querySelector('.arrival-list:not(.hidden) .arrival-table');
        if (visible) scrollToNext(visible);
      }, 100);
    }

    // ================================================================
    // 直近の便までスクロール
    // ================================================================
    function scrollToNext(tableEl) {
      var rows = tableEl.querySelectorAll('tbody tr');
      for (var i = 0; i < rows.length; i++) {
        if (!rows[i].classList.contains('past')) {
          rows[i].scrollIntoView({ block: 'center', behavior: 'smooth' });
          return;
        }
      }
    }

    // ================================================================
    // 系統タブ切り替え
    // ================================================================
    function switchToTab(targetId) {
      document.querySelectorAll('.noriba-tabs .tab').forEach(function(t) {
        t.classList.remove('active');
      });
      var targetBtn = document.querySelector('.noriba-tabs .tab[data-target="' + targetId + '"]');
      if (targetBtn) targetBtn.classList.add('active');

      document.querySelectorAll('.arrival-list').forEach(function(list) {
        list.classList.add('hidden');
      });
      document.getElementById(targetId).classList.remove('hidden');

      setTimeout(function() {
        var visible = document.querySelector('.arrival-list:not(.hidden) .arrival-table');
        if (visible) scrollToNext(visible);
      }, 50);
    }

    document.querySelectorAll('.noriba-tabs .tab').forEach(function(tab) {
      tab.addEventListener('click', function() {
        switchToTab(this.dataset.target);
      });
    });

    // ================================================================
    // 曜日タブ切り替え
    // ================================================================
    document.querySelectorAll('.day-tabs .tab').forEach(function(tab) {
      tab.addEventListener('click', function() {
        document.querySelectorAll('.day-tabs .tab').forEach(function(t) {
          t.classList.remove('active');
        });
        this.classList.add('active');
        currentDayType = this.dataset.daytype;
        renderAllTables();
      });
    });

    // 初期曜日タブをアクティブにする
    var initDayTab = document.querySelector('.day-tabs .tab[data-daytype="' + currentDayType + '"]');
    if (initDayTab) initDayTab.classList.add('active');

    // ================================================================
    // 終日表示トグル
    // ================================================================
    var fullCheckbox = document.getElementById('full-mode');
    if (location.search.indexOf('full=1') !== -1) {
      fullMode = true;
      fullCheckbox.checked = true;
    }
    fullCheckbox.addEventListener('change', function() {
      fullMode = this.checked;
      renderAllTables();
    });

    // ================================================================
    // 初回描画
    // ================================================================
    renderAllTables();

    // ================================================================
    // 「全て」タブの行タップ → 系統別タブに切り替え
    // ================================================================
    document.getElementById('all-body').addEventListener('click', function(e) {
      var row = e.target.closest('tr.all-row-clickable');
      if (!row) return;
      var targetId = row.getAttribute('data-routekey');
      switchToTab(targetId);
      var panel = document.getElementById(targetId);
      if (panel) {
        setTimeout(function() {
          panel.scrollIntoView({ block: 'start', behavior: 'smooth' });
        }, 80);
      }
    });
  </script>
</body>
</html>
